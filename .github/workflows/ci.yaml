---
name: CI
on: push
jobs:
  build-container:
    runs-on: ubuntu-latest
    steps:
      - name: Build Docker image
        uses: docker/build-push-action@v4.1.1
        with:
          push: false
          tags: |
            thewickednet.lu/wickedjukebox:ci-build
      - name: Run Docker container as a service
        run: docker run -d --rm -p 8000:8000 --name backend-container thewickednet.lu/wickedjukebox:ci-build
  check-container:
    runs-on: ubuntu-latest
    needs:
      - build-container
    steps:
      - name: Request root-URL
        run: |
          curl http://localhost:8000/
